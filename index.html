<script>
  const ONE_DAY = 1000 * 60 * 60 * 24;

  // Parse YYYY-MM-DD to a local Date (no UTC shift)
  function localDate(iso) {
    const [y, m, d] = iso.split('-').map(Number);
    return new Date(y, m - 1, d);
  }

  // Start-of-day (local) helper
  function startOfDay(d = new Date()) {
    const x = new Date(d);
    x.setHours(0, 0, 0, 0);
    return x;
  }

  // Inclusive "days until" based on calendar days (local)
  function daysUntilInclusive(target) {
    const t = startOfDay(target);
    const today = startOfDay();
    // ceil so it doesn't drop early during the day; inclusive +1 is baked in by ceil
    return Math.max(0, Math.ceil((t - today) / ONE_DAY));
  }

  function getNextGame() {
    const schedule = [
      { date: '2025-08-29', opponent: 'Tarleton State' },
      { date: '2025-09-06', opponent: 'Kansas State' },
      { date: '2025-09-20', opponent: 'North Texas' },
      { date: '2025-09-25', opponent: 'East Carolina' },
      { date: '2025-10-04', opponent: 'UAB' },
      { date: '2025-10-11', opponent: 'Charlotte' },
      { date: '2025-10-18', opponent: 'Tulane' },
      { date: '2025-11-01', opponent: 'Air Force' },
      { date: '2025-11-08', opponent: 'Temple' },
      { date: '2025-11-22', opponent: 'Tulsa' },
      { date: '2025-11-28', opponent: 'UTSA' },
      { date: '2025-12-13', opponent: 'Navy' }
    ].map(g => ({ date: localDate(g.date), opponent: g.opponent }));

    for (let g of schedule) {
      if (daysUntilInclusive(g.date) > 0) return g;        // upcoming (not today)
      if (startOfDay(g.date).getTime() === startOfDay().getTime()) return g; // today
    }

    // Fallback: next Saturday local
    const today = new Date();
    const nextSat = startOfDay(new Date(today));
    const dow = today.getDay(); // 0=Sun..6=Sat
    const shift = (6 - dow + 7) % 7 || 7;
    nextSat.setDate(nextSat.getDate() + shift);
    return { date: nextSat, opponent: 'opponent for this week' };
  }

  function updateCounters() {
    const now = new Date();
    document.getElementById('today').innerText =
      `Today is ${now.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}!`;

    const ring         = localDate('2025-08-22');
    const thanksgiving = localDate('2025-11-27');
    const armyNavy     = localDate('2025-12-13');
    const christmas    = localDate('2025-12-20');
    const graduation   = localDate('2026-05-23');
    const nextGame     = getNextGame();

    const setText = (id, text) => {
      document.getElementById(id).querySelector('.value').innerText = text;
    };

    setText('ring',         `There are ${daysUntilInclusive(ring)} and a butt days until Ring Weekend!`);
    setText('football',     `There are ${daysUntilInclusive(nextGame.date)} and a butt days until Army beats ${nextGame.opponent} in football!`);
    setText('thanksgiving', `There are ${daysUntilInclusive(thanksgiving)} and a butt days until Thanksgiving Break!`);
    setText('navy',         `There are ${daysUntilInclusive(armyNavy)} and a butt days until Army beats Navy in Football!`);
    setText('christmas',    `There are ${daysUntilInclusive(christmas)} and a butt days until Christmas leave!`);
    setText('grad',         `There are ${daysUntilInclusive(graduation)} and a butt days until graduation and graduation leave for the class of 2026!`);
  }

  // Update now, then schedule the next update exactly at local midnight,
  // then every 24 hours â€” so numbers flip when the date flips.
  updateCounters();

  (function scheduleMidnightTick() {
    const now = new Date();
    const midnight = startOfDay(new Date(now));
    midnight.setDate(midnight.getDate() + 1);
    const msToMidnight = midnight - now;
    setTimeout(() => {
      updateCounters();
      setInterval(updateCounters, ONE_DAY);
    }, msToMidnight);
  })();
</script>
